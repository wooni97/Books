# 프록시 패턴

## 프록시 패턴

### 프록시 패턴이란?

> 제어 흐름을 조정하기 위한 목적으로 중간에 대리자를 두는 패턴
> 

원래 객체에 대한 접근을 제한한다. 요청이 객체에 전달되기 전 후에 무언가를 수행할 수 있다.

### 프록시 객체 사용 이유는**?**

> 객체에 대한 접근제어 및 부가 기능 추가 등을 이유로 사용한다.
> 

# 프록시 패턴

## 프록시 패턴

### 프록시 패턴이란?

> 제어 흐름을 조정하기 위한 목적으로 중간에 대리자를 두는 패턴
> 

원래 객체에 대한 접근을 제한한다. 요청이 객체에 전달되기 전 후에 무언가를 수행할 수 있다.

### 프록시 객체 사용 이유는**?**

> 객체에 대한 접근제어 및 부가 기능 추가 등을 이유로 사용한다.
> 

![image](https://github.com/wooni97/Books/assets/55667589/0a807c1d-f8e7-43ae-aee5-32b60faa8168)


프록시 클래스에는 서비스 객체를 가리키는 참조 필드가 있다. 프록시가 요청의 처리를 완료하면, 그 후 처리된 요청을 서비스 객체에 전달한다. 

클라이언트는 프록시 클래스를 호출하여 서비스 객체의 비즈니스 로직을 사용할 수 있다. 

![image](https://github.com/wooni97/Books/assets/55667589/57b4b240-97e6-483b-9e9c-d02a9b26c60e)


예를 들어, 데이터베이스를 접근하기 앞서 필요한 A 로직이 있다고 가정하자. 모든 클라이언트 코드에 이 로직을 구현하면 코드의 중복을 초래한다.

![image](https://github.com/wooni97/Books/assets/55667589/f7480de3-b824-4e17-8031-d111b5709573)


이럴때 프록시 패턴을 사용한다. 클라이언트가 프록시 객체를 호출하면, 프록시 객체에서 A로직을 실행하고 데이터베이스에 접근하게 된다. 

### Spring의 프록시 패턴 - @Transactional

![image](https://github.com/wooni97/Books/assets/55667589/3e76a890-4e0b-4f09-9978-a730f6f3e294)


`@Transactional` 어노테이션을 적용하지 않았을 경우의 Flow Chart

 **Controller → Service → Repository** 의 흐름으로, 우리가 설계한 그대로 메소드를 호출

`@Transactional` 어노테이션을 적용했을 경우의 Flow Chart

 **Controller**와 **Service** 레이어 사이에 Proxy 객체가 추가되어 **Service** 레이어를 대리 호출하고 있는 모습

프록시 클래스에는 서비스 객체를 가리키는 참조 필드가 있다. 프록시가 요청의 처리를 완료하면, 그 후 처리된 요청을 서비스 객체에 전달한다. 

